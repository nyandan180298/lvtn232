"use strict";(self.webpackChunkluanvantotnghiep=self.webpackChunkluanvantotnghiep||[]).push([[47],{3147:function(e,n,t){t.d(n,{Z:function(){return y}});var a=t(1413),r=t(4165),c=t(5861),o=t(9439),s=t(2791),i=t(1660),u=t(4228),l=t(1069),d=t(2641),h=t(1932),m=t(9435),p=t(3340),f=t(7667),g=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n,t){var c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.create((0,a.Z)((0,a.Z)({},n),{},{kho:t}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Z=t(7689),v=t(9236),x=t(8488),j=t(184),k=/(84|0[3|5|7|8|9])+([0-9]{8})\b/g,b=function(e){var n=e.onClose,t=e.isModalVisible,f=(e.handleRerender,e.products),b=e.isAdmin,y=(0,Z.UO)(),N=(0,s.useState)([{name:"",id:"",quantity:"",image:{name:"",path:""}}]),C=(0,o.Z)(N,2),w=C[0],S=C[1],P=(0,s.useState)({address:"",kho:"",customer:"",customer_phone_num:"",detail:[{product:"",quantity:"0"}],is_admin:b}),q=(0,o.Z)(P,2),T=q[0],E=q[1],I=(0,s.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.map((function(e,n){return n>=T.detail.length&&T.detail.push({product:e,quantity:"0"}),e})),e.next=3,Promise.all(n.map(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.detail(n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:(t=e.sent)&&S(t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[T]);(0,s.useEffect)((function(){I(f)}),[I,f]);var _=(0,s.useCallback)((function(){T.address.trim()?T.customer.trim()?k.test(T.customer_phone_num)?g(T,y.id||"").then((function(e){e.isSuccess?(p.Z.sendSuccess("T\u1ea1o \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng!"),(0,x.H8)(),window.location.reload(),n()):p.Z.sendError("T\u1ea1o \u0111\u01a1n h\xe0ng th\u1ea5t b\u1ea1i: ".concat(e.message))})):p.Z.sendError("S\u0110T kh\xe1ch h\xe0ng ph\u1ea3i \u0111\xfang format s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"):p.Z.sendError("Vui l\xf2ng nh\u1eadp t\xean kh\xe1ch h\xe0ng"):p.Z.sendError("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9 \u0111\u01a1n h\xe0ng")}),[T,n,y.id]);console.log(w);var R=(0,s.useCallback)((function(){(0,x.H8)(),p.Z.sendSuccess("L\xe0m m\u1edbi \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng!"),n()}),[n]);return(0,j.jsx)(l.Z,{title:"T\u1ea1o \u0111\u01a1n h\xe0ng",className:"add-modal",open:t,okText:"\u0110\u1ed3ng \xfd t\u1ea1o",cancelText:"H\u1ee7y",onCancel:n,onOk:_,width:695,footer:[(0,j.jsx)(d.ZP,{onClick:n,children:"Tr\u1edf v\u1ec1"},"back"),(0,j.jsx)(d.ZP,{className:"complete-order-btn",type:"primary",onClick:_,children:"T\u1ea1o \u0111\u01a1n h\xe0ng"},"complete"),(0,j.jsx)(h.ZP,{theme:{components:{Button:{colorPrimaryHover:"black"}}},children:(0,j.jsx)(d.ZP,{className:"cancel-order-btn",type:"primary",onClick:R,children:"L\xe0m m\u1edbi \u0111\u01a1n h\xe0ng"},"cancel")},"cancel")],centered:!0,children:(0,j.jsx)(m.Z,{className:"add-edit-form",children:(0,j.jsxs)("div",{className:"personal",children:[(0,j.jsx)(m.Z.Item,{label:"\u0110\u1ecba ch\u1ec9",required:!0,children:(0,j.jsx)(i.Z,{type:u.I.TEXT,value:T.address||"",onChange:function(e){return E((0,a.Z)((0,a.Z)({},T),{},{address:e}))},placeholder:"\u0110\u1ecba ch\u1ec9",className:"input-item"})}),(0,j.jsx)(m.Z.Item,{label:"T\xean kh\xe1ch h\xe0ng",required:!0,children:(0,j.jsx)(i.Z,{type:u.I.TEXT,value:T.customer||"",onChange:function(e){return E((0,a.Z)((0,a.Z)({},T),{},{customer:e}))},placeholder:"T\xean",className:"input-item"})}),(0,j.jsx)(m.Z.Item,{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xe1ch h\xe0ng",required:!0,children:(0,j.jsx)(i.Z,{type:u.I.NUMBER,value:T.customer_phone_num||"",onChange:function(e){return E((0,a.Z)((0,a.Z)({},T),{},{customer_phone_num:e}))},placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",className:"input-item"})}),w.map((function(e,n){var t,r=n;return e.image&&(t=e.image.path.split("\\")[2]),(0,j.jsxs)("div",{className:"products-input",children:[(0,j.jsxs)("div",{className:"product-name",children:[" ","T\xean s\u1ea3n ph\u1ea9m: ",e.name," | S\u1ed1 L\u01b0\u1ee3ng ",e.quantity,(0,j.jsx)("img",{src:"http://localhost:3001/image/use/".concat(t),alt:"".concat(e.image.name),height:50,className:"product-image"})]}),(0,j.jsx)(m.Z.Item,{label:"S\u1ed1 L\u01b0\u1ee3ng",required:!0,children:(0,j.jsx)(i.Z,{type:u.I.NUMBER,value:T.detail[n].quantity||"",onChange:function(n){var t=n;t>e.quantity?(E((function(n){return(0,a.Z)((0,a.Z)({},n),{},{detail:n.detail.map((function(n,t){return t===r?(0,a.Z)((0,a.Z)({},n),{},{product:e.id,quantity:"0"}):n}))})})),p.Z.sendError("S\u1ed1 l\u01b0\u1ee3ng m\u1edbi nh\u1eadp l\u1edbn h\u01a1n s\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m trong kho")):E((function(n){return(0,a.Z)((0,a.Z)({},n),{},{detail:n.detail.map((function(n,c){return c===r?(0,a.Z)((0,a.Z)({},n),{},{product:e.id,quantity:t}):n}))})}))},placeholder:"S\u1ed1 L\u01b0\u1ee3ng",className:"input-item"})})]},n)}))]})})})},y=(0,s.memo)(b)},7667:function(e,n,t){var a=t(3144),r=t(5671),c=t(136),o=t(7277),s=t(8397),i="/order",u=function(e){(0,c.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;(0,r.Z)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=n.call.apply(n,[this].concat(c))).create=function(n){var t="".concat(i,"/create");return e.post(t,n)},e.detail=function(n){var t="".concat(i,"/get/").concat(n);return e.get(t)},e.getAll=function(n,t){var a="".concat(i,"/getAll");return e.post(a,n,t)},e.update=function(n){var t="".concat(i,"/update/").concat(n.id);return e.post(t,n)},e.complete=function(n){var t="".concat(i,"/complete/").concat(n.id);return e.post(t,n)},e.confirm=function(n){var t="".concat(i,"/confirm/").concat(n.id);return e.post(t,n)},e.cancel=function(n){var t="".concat(i,"/cancel/").concat(n.id);return e.post(t,n)},e.remove=function(n){var t="".concat(i,"/delete/").concat(n);return e.delete(t)},e}return(0,a.Z)(t)}(s.Z);n.Z=new u},2047:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var a=t(4165),r=t(1413),c=t(5861),o=t(9439),s=t(2791),i=t(2143),u=t(9286),l=t(2641),d=t(3272),h=t(6591),m=t(563),p=t(8488),f=t(3340),g=t(8687),Z=t(1079),v=t(886),x=t(6240),j=t(7689),k=t(184),b=(0,s.memo)((function(e,n){var t=(0,j.s0)();return(0,k.jsxs)("div",{className:"customer-header",id:"/".concat(e.id),children:[(0,k.jsx)("div",{className:"header-logo",children:(0,k.jsx)("img",{src:"webicon_remove_background.png",alt:"Web Logo",height:80})}),(0,k.jsx)("div",{className:"homepage-header-tabs-container",children:(0,k.jsx)(x.Z,{direction:"horizontal",replace:!0,items:[{key:"home-anchor",href:"#/home",title:"Trang ch\u1ee7"},{key:"about-anchor",href:"#/about",title:"Gi\u1edbi thi\u1ec7u"},{key:"contact-anchor",href:"#/contact",title:"Li\xean h\u1ec7"},{key:"news-anchor",href:"#/".concat(e.id),title:"Kho H\xe0ng"}]})}),(0,k.jsxs)("div",{className:"homepage-header-buttons-container",children:[(0,k.jsx)(l.ZP,{className:"homepage-button reg",onClick:function(){return t("/register")},children:"\u0110\u0103ng k\xfd"}),(0,k.jsx)(l.ZP,{className:"homepage-button log",onClick:function(){return t("/login")},children:"\u0110\u0103ng nh\u1eadp"})]})]})}));b.displayName="CustomerHeader";var y=b,N=t(3147),C=t(7892),w=t.n(C),S=t(4869),P="".concat(h.y8,"/category"),q=(0,s.memo)((function(e){var n=e.data,t=e.onPaginate,r=e.pageObj,g=e.handleRerender,x=e.khoId,j=e.order,b=(0,s.useState)(!1),C=(0,o.Z)(b,2),q=C[0],T=C[1],E=(0,s.useState)([]),I=(0,o.Z)(E,2),_=I[0],R=I[1],H=(0,s.useState)([]),M=(0,o.Z)(H,2),A=M[0],L=M[1],O=(0,s.useState)([]),z=(0,o.Z)(O,2),B=z[0],V=z[1],K=(0,s.useCallback)((function(){L((0,p.co)())}),[]),U=(0,s.useCallback)((function(){0!==A.length?T(!0):f.Z.sendInfo("Kh\xf4ng c\xf3 S\u1ea3n ph\u1ea9m n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn trong \u0111\u01a1n h\xe0ng")}),[A]),X=(0,s.useCallback)((0,c.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P,"/getAll"));case 2:return n=e.sent,e.next=5,n.json();case 5:(t=e.sent)&&R(t.data);case 7:case"end":return e.stop()}}),e)}))),[]);(0,s.useEffect)((function(){K(),V(j.products)}),[j,K]),(0,s.useEffect)((function(){X()}),[X]);var F=(0,s.useCallback)((function(){g(),T(!1)}),[g]),G=(0,s.useCallback)((function(e,n){var t=-Math.ceil(w()().diff(n.hanSd)/864e5);return 0!==n.quantity&&t>0?B.includes(n.id)?(0,k.jsx)(l.ZP,{className:"add-order-button",onClick:function(){(0,p.Er)(n.id),f.Z.sendSuccess("X\xf3a s\u1ea3n ph\u1ea9m ".concat(n.name," ra kh\u1ecfi \u0111\u01a1n th\xe0nh c\xf4ng"))},children:(0,k.jsx)(i.Z,{style:{color:"black"}})}):(0,k.jsx)(l.ZP,{className:"add-order-button",onClick:function(){(0,p.pj)(n.id),f.Z.sendSuccess("Th\xeam s\u1ea3n ph\u1ea9m ".concat(n.name," th\xe0nh c\xf4ng"))},children:(0,k.jsx)(u.Z,{style:{color:"black"}})}):(0,k.jsx)("div",{className:"blank"})}),[B]);return(0,k.jsxs)("div",{className:"customer-kho-san-pham-container",children:[(0,k.jsx)(y,{id:x}),(0,k.jsx)("div",{className:"customer-main-container",children:(0,k.jsxs)("div",{className:"table-container",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"search-add-bar",children:[(0,k.jsx)("div",{className:"search-div",children:(0,k.jsx)(Z.Z,{})}),(0,k.jsxs)("div",{className:"header-order-displayer",children:["\u0110\u01a1n h\xe0ng hi\u1ec7n t\u1ea1i: ",null===A||void 0===A?void 0:A.length]}),(0,k.jsx)("div",{className:"add-div",children:(0,k.jsxs)(l.ZP,{className:"add-button",onClick:function(){return U()},children:[(0,k.jsx)(m.Z,{}),"T\u1ea1o \u0111\u01a1n h\xe0ng"]})}),q&&(0,k.jsx)(N.Z,{isModalVisible:q,onClose:F,handleRerender:g,products:A,isAdmin:"0"})]}),(0,k.jsx)("div",{className:"filter-div",children:(0,k.jsx)(v.Z,{categories:_,handleRerender:g})}),(0,k.jsx)(S.Z,{data:n,addOrderFormat:G})]}),(0,k.jsx)(d.Z,{title:"S\u1ea3n Ph\u1ea9m",pageSize:h.Ky,totalRow:r&&r.total,currentPage:r&&r.page,totalPage:r&&r.totalPage,onPaginate:t})]})})]})})),T=(0,g.$j)((function(e){return{order:e.order}}))(q),E=t(9236),I=t(1087),_="".concat(h.y8,"/nguon-nhap"),R="".concat(h.y8,"/category"),H=(0,s.memo)((function(){var e=(0,j.UO)().id,n=(0,I.lr)(),t=(0,o.Z)(n,2),i=t[0],u=t[1],l=(0,s.useState)(!1),d=(0,o.Z)(l,2),h=d[0],m=d[1],p=(0,s.useCallback)((function(){m(!h)}),[h]),f=(0,s.useState)([]),g=(0,o.Z)(f,2),Z=g[0],v=g[1],x=(0,s.useState)({page:0,total:0,totalPage:0}),b=(0,o.Z)(x,2),y=b[0],N=b[1],C=(0,s.useCallback)((function(e){i.set("page",e),u(i)}),[i,u]),w=(0,s.useCallback)(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={params:t},e.next=3,E.Z.getAll(n,o);case 3:if((s=e.sent).data||v([]),!s.isSuccess){e.next=9;break}Promise.all(s.data.data.map(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t,c,o,s,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.nguonNhap||!n.category){e.next=14;break}return e.next=3,fetch("".concat(_,"/get/").concat(n.nguonNhap));case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.next=9,fetch("".concat(R,"/get/").concat(n.category));case 9:return o=e.sent,e.next=12,o.json();case 12:return s=e.sent,e.abrupt("return",(0,r.Z)((0,r.Z)({},n),{},{nguonNhap:c.data.name,category:s.data.name}));case 14:if(!n.category){e.next=22;break}return e.next=17,fetch("".concat(R,"/get/").concat(n.category));case 17:return i=e.sent,e.next=20,i.json();case 20:return u=e.sent,e.abrupt("return",(0,r.Z)((0,r.Z)({},n),{},{category:u.data.name}));case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(e){return v(e)})).catch((function(e){return console.error(e)})),e.next=10;break;case 9:return e.abrupt("return");case 10:N({page:s.data.page,total:s.data.total,totalPage:s.data.totalPage});case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]);return(0,s.useEffect)((function(){var n=Object.fromEntries(i.entries());w({khoid:e},n)}),[w,i,e,h]),Z&&(0,k.jsx)(T,{data:Z,onPaginate:C,pageObj:y,handleRerender:p,khoId:e})}));H.displayName="CustomerKho";var M=H},2143:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(7462),r=t(2791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},o=t(4291),s=function(e,n){return r.createElement(o.Z,(0,a.Z)({},e,{ref:n,icon:c}))};var i=r.forwardRef(s)},9286:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(7462),r=t(2791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},o=t(4291),s=function(e,n){return r.createElement(o.Z,(0,a.Z)({},e,{ref:n,icon:c}))};var i=r.forwardRef(s)}}]);
//# sourceMappingURL=47.80e26bcc.chunk.js.map